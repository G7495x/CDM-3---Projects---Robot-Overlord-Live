{"version":3,"sources":["model/Sixi2.js","assets/objs sync /^/.*$","assets/objs/1_Anchor.obj","assets/objs/2_Shoulder.obj","assets/objs/3_Bicep.obj","assets/objs/4_Forearm.obj","assets/objs/5_TuningFork.obj","assets/objs/6_PicassoBox.obj","assets/objs/7_Hand.obj","assets/objs/8_ClampBase.obj","assets/objs/9_Clamp_Left_Fixed.obj","assets/objs/9_Clamp_Right_Fixed.obj","three-js-helper.js","components/PoseToImg/PoseToImg.js","components/SimRobot/SimRobot.js","components/HistoryTimeline/HistoryTimeline.js","reducers/mainReducer.js","contexts/MainContext.js","components/RightSidebar/RightSidebar.js","components/Login/Login.js","utilities/Accordion/Accordion.js","components/BottomDrawer/BottomDrawer.js","components/CamFeed/CamFeed.js","components/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","x","position","axis","angles","home","min","max","objs","y","parent","z","u","v","w","t","t_l","t_r","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","objLoader","OBJLoader","setupRenderer","width","height","renderer","camera","aspectRatio","setSize","setPixelRatio","window","devicePixelRatio","fov","Math","atan","THREE","DEG2RAD","aspect","updateProjectionMatrix","scene","antialias","alpha","preserveDrawingBuffer","canvas","domElement","document","body","appendChild","section3dObjects","set","lookAt","controls","imgCache","PoseToImg","props","pose","cache","state","useContext","MainContext","thumbnail","isPoseToImgReady","poseObj","JSON","parse","_","forIn","s","i","rotateSection","render","toDataURL","src","omit","data-pose","alt","section3dObjs","objNames","values","Sixi2","flatMap","filter","objLoadPromise","Promise","all","path","require","reject","load","then","forEach","SimRobot","useRef","useEffect","a","current","OrbitControls","enableDamping","enablePan","dampingFactor","rotateSpeed","maxPolarAngle","PI","target","setupThisRenderer","addEventListener","pointLight","add","ambientLight","intensity","clone","so","mapValues","postObjLoad","console","log","dispatch","ref","offsetWidth","offsetHeight","data","name","sectionOuter","setRotationFromAxisAngle","sectionInner","sectionName","inner","angle","clamp","sectionAngle","datatTo3dObject","section","leftFork","children","rightFork","offset","factor","requestAnimationFrame","update","object","currentPose","HistoryTimeline","historySeekPos","poseHistory","simPose","historyLockAttachment","length","stringify","className","type","checked","onChange","onClick","showHistoryTimeline","style","step","value","valueAsNumber","undefined","p","key","prevPose","prevBottomExpanded","currentState","mainReducer","actionType","reducer","toFixed","push","floor","b","ceil","c","lerp","poseLerp","isPolling","showSequenceControl","setTimeout","simRobotResize","homePose","sections","realPose","targetPose","initState","IP","status","camFeedState","camFeedMaximize","showLibrary","createContext","urlStateParamList","mounted","withRouter","location","history","useReducer","stateFromUrl","pick","fromEntries","URLSearchParams","search","setInterval","axios","get","res","catch","err","replace","pathname","toString","fetch","error","Provider","useState","isMounted","setIsMounted","onSubmit","preventDefault","htmlFor","Accordion","expanded","setExpanded","head","maxHeight","RightSidebar","SectionInput","fontSize","resetActive","setResetActive","title","tabIndex","BottomDrawer","CamFeed","component","Login","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","getElementById","URL","process","href","origin","headers","response","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.caaf19ed.chunk.js","sourcesContent":["// axis: axis of rotation\r\n// angles.home angle (deg)\r\n// angles.min  angle (deg)\r\n// angles.max  angle (deg)\r\n\r\nmodule.exports={\r\n\tx: {\r\n\t\tposition: [0,11.32,0],\r\n\t\taxis: [0,1,0],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: -120,\r\n\t\t\tmax: 120,\r\n\t\t},\r\n\t\tobjs: ['2_Shoulder.obj'],\r\n\t},\r\n\ty: {\r\n\t\tposition: [0,7.524,0],\r\n\t\taxis: [0,0,1],\r\n\t\tangles: {\r\n\t\t\thome: -90,\r\n\t\t\tmin: -170,\r\n\t\t\tmax: 0,\r\n\t\t},\r\n\t\tobjs: ['3_Bicep.obj'],\r\n\t\tparent: 'x',\r\n\t},\r\n\tz: {\r\n\t\tposition: [0,35.796,0],\r\n\t\taxis: [0,0,1],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: -83.369,\r\n\t\t\tmax: 86,\r\n\t\t},\r\n\t\tobjs: ['4_Forearm.obj'],\r\n\t\tparent: 'y',\r\n\t},\r\n\tu: {\r\n\t\tposition: [29.207,6.406,0],\r\n\t\taxis: [1,0,0],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: -175,\r\n\t\t\tmax: 175,\r\n\t\t},\r\n\t\tobjs: ['5_TuningFork.obj'],\r\n\t\tparent: 'z',\r\n\t},\r\n\tv: {\r\n\t\tposition: [9.513,0.04,-0.034],\r\n\t\taxis: [0,0,1],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: -120,\r\n\t\t\tmax: 120,\r\n\t\t},\r\n\t\tobjs: ['6_PicassoBox.obj'],\r\n\t\tparent: 'u',\r\n\t},\r\n\tw: {\r\n\t\tposition: [5.423,-0.004,0.031],\r\n\t\taxis: [1,0,0],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: -170,\r\n\t\t\tmax: 170,\r\n\t\t},\r\n\t\tobjs: ['7_Hand.obj'],\r\n\t\tparent: 'v',\r\n\t},\r\n\tt: {\r\n\t\tposition: [0.489,0,0],\r\n\t\taxis: [0,0,0],\r\n\t\tangles: {\r\n\t\t\thome: 180,\r\n\t\t\tmin: 10,\r\n\t\t\tmax: 180,\r\n\t\t},\r\n\t\tobjs: ['8_ClampBase.obj'],\r\n\t\tparent: 'w',\r\n\t},\r\n\tt_l: {\r\n\t\tposition: [10.145,0,-4.05],\r\n\t\taxis: [0,0,0],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0,\r\n\t\t},\r\n\t\tobjs: ['9_Clamp_Left_Fixed.obj'],\r\n\t\tparent: 't',\r\n\t},\r\n\tt_r: {\r\n\t\tposition: [10.145,0,4.05],\r\n\t\taxis: [0,0,0],\r\n\t\tangles: {\r\n\t\t\thome: 0,\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0,\r\n\t\t},\r\n\t\tobjs: ['9_Clamp_Right_Fixed.obj'],\r\n\t\tparent: 't',\r\n\t},\r\n}\r\n","var map = {\n\t\"./1_Anchor.obj\": 73,\n\t\"./2_Shoulder.obj\": 74,\n\t\"./3_Bicep.obj\": 75,\n\t\"./4_Forearm.obj\": 76,\n\t\"./5_TuningFork.obj\": 77,\n\t\"./6_PicassoBox.obj\": 78,\n\t\"./7_Hand.obj\": 79,\n\t\"./8_ClampBase.obj\": 80,\n\t\"./9_Clamp_Left_Fixed.obj\": 81,\n\t\"./9_Clamp_Right_Fixed.obj\": 82\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 72;","module.exports = __webpack_public_path__ + \"static/media/1_Anchor.05a3563c.obj\";","module.exports = __webpack_public_path__ + \"static/media/2_Shoulder.67fa005d.obj\";","module.exports = __webpack_public_path__ + \"static/media/3_Bicep.6eb28d2f.obj\";","module.exports = __webpack_public_path__ + \"static/media/4_Forearm.bab2fed0.obj\";","module.exports = __webpack_public_path__ + \"static/media/5_TuningFork.69d3d423.obj\";","module.exports = __webpack_public_path__ + \"static/media/6_PicassoBox.78e539c9.obj\";","module.exports = __webpack_public_path__ + \"static/media/7_Hand.bfb064cf.obj\";","module.exports = __webpack_public_path__ + \"static/media/8_ClampBase.d515e25f.obj\";","module.exports = __webpack_public_path__ + \"static/media/9_Clamp_Left_Fixed.45fe70fc.obj\";","module.exports = __webpack_public_path__ + \"static/media/9_Clamp_Right_Fixed.1e1f6339.obj\";","import * as THREE from 'three'\r\nimport {OBJLoader} from 'three/examples/jsm/loaders/OBJLoader'\r\nexport const objLoader=new OBJLoader()\r\n\r\nexport function objLoaderAsync(path){\r\n\treturn new Promise((resolve,reject)=>{\r\n\t\ttry{ objLoader.load(path,o=>resolve(o),null,null,null) }\r\n\t\tcatch(e){ reject(e) }\r\n\t})\r\n}\r\n\r\n// Returns angle between (-180,180]\r\nexport function normalizeAngle(angle){\r\n\tangle=angle%360\r\n\tangle=(angle+360)%360\r\n\tif(angle>180) angle-=360\r\n\treturn angle\r\n}\r\n\r\nexport function setupRenderer(width,height,renderer,camera){\r\n\tconst aspectRatio=width/height\r\n\r\n\trenderer.setSize(width,height)\r\n\trenderer.setPixelRatio(window.devicePixelRatio)\r\n\t// renderer.setPixelRatio(1) // Low quality, high performance for higher density displays\r\n\r\n\t// Universal desktop and mobile friendly FOV algorithm\r\n\tcamera.fov=45*(aspectRatio>1?1:Math.atan(1/aspectRatio)/THREE.Math.DEG2RAD/45)\r\n\tcamera.aspect=aspectRatio\r\n\tcamera.updateProjectionMatrix()\r\n}\r\n","import React,{useContext} from 'react'\r\nimport * as THREE from 'three'\r\n// import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\r\nimport _ from 'lodash'\r\n\r\nimport './PoseToImg.scss'\r\nimport {postObjLoad} from '../SimRobot/SimRobot'\r\nimport {MainContext,dispatch} from '../../contexts/MainContext'\r\nimport {setupRenderer} from '../../three-js-helper'\r\n\r\n// TODO: Maybe blobs (about 20% better memory efficiency)\r\n\r\nconst renderer=new THREE.WebGLRenderer({\r\n\tantialias:             true,\r\n\talpha:                 true,\r\n\tpreserveDrawingBuffer: true,\r\n})\r\nconst canvas=renderer.domElement\r\ncanvas.id='PoseToImgCanvas'\r\ndocument.body.appendChild(canvas)\r\n\r\nlet scene\r\nlet section3dObjs={}\r\nconst section3dObjects={}\r\n\r\nconst camera=new THREE.PerspectiveCamera()\r\ncamera.position.set(100,100,-100)\r\ncamera.lookAt(0,30,0)\r\n// const controls=new OrbitControls(camera,canvas)\r\n// controls.enableDamping=true\r\n// controls.enablePan=false\r\n// controls.dampingFactor=.1\r\n// controls.rotateSpeed=.5\r\n// controls.maxPolarAngle=Math.PI/2\r\n// controls.target.set(0,30,0)\r\nsetupRenderer(320,240,renderer,camera)\r\n\r\nfunction render(){\r\n\t// requestAnimationFrame(render)\r\n\t// controls.update()\r\n\trenderer.render(scene,camera)\r\n}\r\n\r\nexport function initPoseToImg(s,so){\r\n\tscene=s\r\n\tsection3dObjs=so\r\n\t// console.log(scene,section3dObjs)\r\n\r\n\tpostObjLoad(scene,section3dObjs,section3dObjects)\r\n\tconsole.log('isPoseToImgReady')\r\n\tdispatch(['SET_STATE',{isPoseToImgReady:true}])\r\n}\r\n\r\nconst imgCache=/*JSON.parse(localStorage.getItem('imgCache')) ||*/ {}\r\nexport default function PoseToImg(props){\r\n\tconst {pose,cache}=props\r\n\tconst {state}=useContext(MainContext)\r\n\tlet thumbnail=imgCache[pose]\r\n\r\n\tif(state.isPoseToImgReady && !thumbnail){\r\n\t\tconst poseObj=JSON.parse(pose)\r\n\t\t_.forIn(section3dObjects,(s,i)=>s.rotateSection(poseObj[i]))\r\n\t\trender()\r\n\t\tthumbnail=canvas.toDataURL()\r\n\t\tif(cache!==false){\r\n\t\t\timgCache[pose]=thumbnail\r\n\t\t\t// try{ localStorage.setItem('imgCache',JSON.stringify(imgCache)) }catch(e){ console.error(e) }\r\n\t\t}\r\n\t}\r\n\treturn <img src={thumbnail} {..._.omit(props,['pose','cache'])} data-pose={pose} alt=\"\"/>\r\n}\r\n","import React,{useRef,useEffect} from 'react'\r\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\r\nimport * as THREE from 'three'\r\nimport _ from 'lodash'\r\n\r\nimport './SimRobot.scss'\r\nimport Sixi2 from '../../model/Sixi2'\r\nimport {initPoseToImg} from '../PoseToImg/PoseToImg'\r\nimport {objLoaderAsync,setupRenderer} from '../../three-js-helper'\r\n\r\nexport let canvas\r\nexport let renderer\r\nexport let scene\r\nexport let camera\r\nexport let controls\r\nexport const section3dObjs={}\r\nexport const section3dObjects={}\r\nexport let cameraPos=new THREE.Vector3(90,90,-90)\r\n\r\n// TODO: Reset view\r\n\r\nexport const objNames=['1_Anchor.obj',...Object.values(Sixi2).flatMap(o=>o.objs)].filter(o=>o)\r\nexport const objLoadPromise=Promise.all(objNames.map(o=>objLoaderAsync(require('../../assets/objs/'+o)))).then(o=>{\r\n\to.forEach((o,i)=>section3dObjs[objNames[i]]=o)\r\n})\r\n\r\nexport default function SimRobot(){\r\n\tcanvas=useRef()\r\n\tuseEffect(componentDidMount,[])\r\n\r\n\treturn (\r\n\t\t<canvas id=\"SimRobot\" ref={canvas}></canvas>\r\n\t)\r\n\r\n\tfunction componentDidMount(){\r\n\t\t(async ()=>{\r\n\t\t\trenderer=new THREE.WebGLRenderer({\r\n\t\t\t\tantialias:             true,\r\n\t\t\t\tcanvas:                canvas.current,\r\n\t\t\t\talpha:                 true,\r\n\t\t\t\tpreserveDrawingBuffer: true,\r\n\t\t\t})\r\n\t\t\tscene=new THREE.Scene()\r\n\t\t\tcamera=new THREE.PerspectiveCamera()\r\n\t\t\tcamera.position.set(90,90,-90)\r\n\t\t\tcamera.lookAt(0,30,0)\r\n\t\t\tcontrols=new OrbitControls(camera,renderer.domElement)\r\n\t\t\tcontrols.enableDamping=true\r\n\t\t\tcontrols.enablePan=false\r\n\t\t\tcontrols.dampingFactor=.1\r\n\t\t\tcontrols.rotateSpeed=.5\r\n\t\t\tcontrols.maxPolarAngle=Math.PI/2\r\n\t\t\tcontrols.target.set(0,30,0)\r\n\t\t\tsetupThisRenderer()\r\n\t\t\twindow.addEventListener('resize',setupThisRenderer,true)\r\n\r\n\t\t\tconst pointLight=new THREE.PointLight()\r\n\t\t\tpointLight.position.set(0,100,0)\r\n\t\t\tscene.add(pointLight)\r\n\t\t\tconst ambientLight=new THREE.AmbientLight()\r\n\t\t\tambientLight.intensity=.25\r\n\t\t\tscene.add(ambientLight)\r\n\r\n\t\t\tawait objLoadPromise\r\n\t\t\t// console.log(scene,section3dObjs)\r\n\t\t\tinitPoseToImg(scene.clone(),_.mapValues(section3dObjs,o=>o.clone()))\r\n\r\n\t\t\tpostObjLoad(scene,section3dObjs,section3dObjects)\r\n\t\t\trender()\r\n\t\t})()\r\n\t}\r\n}\r\n\r\nexport function setupThisRenderer(){\r\n\tsetupRenderer(canvas.current.offsetWidth,canvas.current.offsetHeight,renderer,camera)\r\n}\r\n\r\nexport function postObjLoad(scene,section3dObjs,section3dObjects){\r\n\t_.forIn(Sixi2,(s,i)=>section3dObjects[i]=datatTo3dObject(s,i,section3dObjs,section3dObjects))\r\n\r\n\tconst section=section3dObjects['t'].inner\r\n\tconst leftFork=section.children[1].inner\r\n\tconst rightFork=section.children[2].inner\r\n\tsection3dObjects['t'].rotateSection=function(offset){\r\n\t\t// NOTE: Verify and remove .7\r\n\t\tconst factor=(offset-Sixi2['t'].angles.max)/Sixi2['t'].angles.max*.7\r\n\t\tleftFork.position.z=factor*Sixi2['t_l'].position[2]\r\n\t\trightFork.position.z=factor*Sixi2['t_r'].position[2]\r\n\t}\r\n\tscene.add(section3dObjs['1_Anchor.obj'])\r\n\tscene.add(section3dObjects['x'])\r\n}\r\n\r\nexport function datatTo3dObject(data,name,section3dObjs,section3dObjects){\r\n\tconst axis=new THREE.Vector3(...data.axis)\r\n\tconst sectionOuter=new THREE.Object3D()\r\n\tsectionOuter.name='section-'+name\r\n\tsectionOuter.position.set(...data.position)\r\n\tsectionOuter.setRotationFromAxisAngle(axis,data.angles.home*THREE.Math.DEG2RAD)\r\n\r\n\tconst sectionInner=new THREE.Object3D()\r\n\tsectionOuter.add(sectionInner)\r\n\tsectionInner.name='section-'+name+'-inner'\r\n\tdata.objs.map(o=>sectionInner.add(section3dObjs[o]))\r\n\r\n\tsectionOuter.sectionName=name\r\n\tsectionOuter.inner=sectionInner\r\n\tsectionOuter.axis=axis\r\n\tsectionOuter.rotateSection=function(angle){\r\n\t\tangle=THREE.Math.clamp(angle,data.angles.min,data.angles.max)\r\n\t\tif(sectionOuter.sectionAngle===angle) return\r\n\t\tsectionOuter.sectionAngle=angle\r\n\t\tsectionInner.setRotationFromAxisAngle(axis,-angle*THREE.Math.DEG2RAD)\r\n\t}\r\n\tsectionOuter.rotateSection(data.angles.home)\r\n\r\n\tif(data.parent)\r\n\t\tsection3dObjects[data.parent].inner.add(sectionOuter)\r\n\treturn sectionOuter\r\n}\r\n\r\nfunction render(){\r\n\trequestAnimationFrame(render)\r\n\tcontrols.update()\r\n\tcameraPos=controls.object.position\r\n\trenderer.render(scene,camera)\r\n}\r\n\r\nexport function poseLerp(a,b,alpha){\r\n\treturn _.mapValues(a,(v,i)=>THREE.Math.lerp(a[i],b[i],alpha))\r\n}\r\n\r\n// TODO: IK\r\n// TODO: Collision detection\r\n","import React,{useContext} from 'react'\r\n\r\nimport {MainContext} from '../../contexts/MainContext'\r\nimport './HistoryTimeline.scss'\r\nimport PoseToImg from '../PoseToImg/PoseToImg'\r\n\r\n// NOTE: Maybe UI Toggle\r\n// TODO: Scroll\r\n// TODO: Snappy seekbar toggle (as context state)\r\n\r\nexport let currentPose\r\nexport default function HistoryTimeline(){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tconst {historySeekPos,poseHistory,simPose,historyLockAttachment}=state\r\n\tif(historySeekPos===poseHistory.length) currentPose=JSON.stringify(simPose)\r\n\treturn (\r\n\t\t<div id=\"HistoryTimeline\">\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"f-center px-8 py-4 spb-x-8\">\r\n\t\t\t\t\t<div className=\"fa fa-history\"/>\r\n\t\t\t\t\t<div className=\"b-700\">History Timeline</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"f-center mr-auto px-8 py-4 pr-0\">\r\n\t\t\t\t\t<span className=\"h7\">Lock End Attachment State</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"ml-8\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tchecked={historyLockAttachment}\r\n\t\t\t\t\t\tonChange={({target})=>{dispatch(['SET_STATE',{historyLockAttachment: target.checked}])}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"fa fa-minus f-center px-16\" onClick={()=>dispatch(['SET_STATE',{showHistoryTimeline: false}])}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"seekbar f-center\" style={{height: '30px'}}>\r\n\t\t\t\t<div className=\"text-center h7\">Seekbar</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tposeHistory.length>=1?\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"range\"\r\n\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\tmax={poseHistory.length}\r\n\t\t\t\t\t\t\tstep=\".01\"\r\n\t\t\t\t\t\t\tvalue={historySeekPos}\r\n\t\t\t\t\t\t\tonChange={({target:{valueAsNumber}})=>dispatch(['HISTORY_SEEK',valueAsNumber])}\r\n\t\t\t\t\t\t\tstyle={{width: (poseHistory.length)*136+'px'}}\r\n\t\t\t\t\t\t/>:undefined\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"row spc-8 f-nowrap scroll-x\">\r\n\t\t\t\t{poseHistory.map((p,i)=><PoseToImg key={i} pose={p} onClick={()=>dispatch(['HISTORY_SEEK',i])}/>)}\r\n\t\t\t\t<div className=\"col-extrude p-8 current d-flex\">\r\n\t\t\t\t\t<PoseToImg cache={false} pose={currentPose} onClick={()=>dispatch(['HISTORY_SEEK',poseHistory.length])}/>\r\n\t\t\t\t\t<div className=\"vertical-text h7 b-500 f-center\">\r\n\t\t\t\t\t\t<div className=\"mb-auto\">Current Pose</div>\r\n\t\t\t\t\t\t<div className=\"fa fa-chevron-right\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import _ from 'lodash'\r\nimport * as THREE from 'three'\r\n\r\nimport {section3dObjects,setupThisRenderer as simRobotResize,poseLerp,triggerAnimation} from '../components/SimRobot/SimRobot'\r\nimport Sixi2 from '../model/Sixi2'\r\nimport {currentPose} from '../components/HistoryTimeline/HistoryTimeline'\r\n\r\nexport let currentState={}\r\nexport let prevPose\r\nexport let prevBottomExpanded\r\nexport const mainReducer=(state,[actionType,data])=>{\r\n\tcurrentState=reducer(state,actionType,data)\r\n\tif(currentState.isPolling==='false') currentState.isPolling=false\r\n\tif(currentState.isPolling==='true') currentState.isPolling=true\r\n\tif(prevBottomExpanded !== (state.showHistoryTimeline || state.showSequenceControl)){\r\n\t\tconsole.log('Bottom drawer changed')\r\n\t\twindow.setTimeout(simRobotResize,0)\r\n\t\tprevBottomExpanded=state.showHistoryTimeline || state.showSequenceControl\r\n\t}\r\n\tif(actionType==='SET_SIM_ANGLES') currentState.historySeekPos=state.poseHistory.length\r\n\r\n\t// console.log(data,actionType,currentState)\r\n\treturn currentState\r\n}\r\n\r\n// TODO: on historyLockAttachment, apply state\r\nfunction reducer(state,actionType,data){\r\n\tlet pose\r\n\tswitch(actionType){\r\n\t\tcase 'SET_STATE':\r\n\t\t\treturn {...state,...data}\r\n\t\tcase 'SET_SIM_ANGLES':\r\n\t\t\tfor(let i in data){\r\n\t\t\t\tdata[i]=THREE.Math.clamp(+data[i].toFixed(3),Sixi2[i].angles.min,Sixi2[i].angles.max)\r\n\t\t\t\tsection3dObjects[i].rotateSection(data[i])\r\n\t\t\t}\r\n\t\t\treturn {...state,simPose: data}\r\n\t\tcase 'GO':\r\n\t\t\t// TODO: isOnline state\r\n\t\t\t// axios.put(`http://${state.IP}:7878/goto`,state.simPose)\r\n\t\t\tpose=JSON.stringify(state.simPose)\r\n\t\t\tif(prevPose!==pose){\r\n\t\t\t\tstate.poseHistory.push(pose)\r\n\t\t\t\tstate.historySeekPos=state.poseHistory.length\r\n\t\t\t\tprevPose=pose\r\n\t\t\t}\r\n\t\t\treturn {...state}\r\n\t\tcase 'HISTORY_SEEK':\r\n\t\t\tlet a=Math.floor(data)\r\n\t\t\tlet b=Math.ceil(data)\r\n\t\t\t// const alpha=+((data%1).toFixed(1))\r\n\t\t\tconst alpha=data%1\r\n\t\t\tconst c=JSON.parse(currentPose)\r\n\t\t\ta=a>=state.poseHistory.length?c:JSON.parse(state.poseHistory[a])\r\n\t\t\tb=b>=state.poseHistory.length?c:JSON.parse(state.poseHistory[b])\r\n\t\t\tconst p=poseLerp(a,b,alpha)\r\n\t\t\tif(state.historyLockAttachment) p['t']=c['t']\r\n\t\t\treturn {...reducer(state,'SET_SIM_ANGLES',p),historySeekPos: data}\r\n\t\tdefault: return state\r\n\t}\r\n}\r\n","import React,{createContext,useReducer,useEffect} from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport axios from 'axios'\r\n\r\nimport {mainReducer} from '../reducers/mainReducer'\r\nimport sections from '../model/Sixi2'\r\nimport {currentState} from '../reducers/mainReducer'\r\n\r\nexport let dispatch\r\nexport const prodMode=true\r\n\r\nexport const homePose=JSON.stringify(_.mapValues(sections,s=>s.angles.home))\r\nexport let realPose=JSON.parse(homePose)\r\nexport let targetPose=JSON.parse(homePose)\r\nexport const initState=JSON.stringify({\r\n\tisPolling: prodMode?true:false,\r\n\tIP: '',\r\n\r\n\tsimPose: JSON.parse(homePose),\r\n\tstatus: 'Offline',\r\n\tcamFeedState: 'searching',\r\n\tcamFeedMaximize: false,\r\n\tisPoseToImgReady: false,\r\n\r\n\tshowHistoryTimeline: true,\r\n\tshowSequenceControl: false,\r\n\tshowLibrary: false,\r\n\r\n\tposeHistory: [],\r\n\thistorySeekPos: 0,\r\n\thistoryLockAttachment: true,\r\n})\r\nexport const MainContext=createContext(JSON.parse(initState))\r\nexport const current={} // state,dispatch\r\nexport const urlStateParamList=['IP','isPolling']\r\n\r\nlet mounted=false\r\nexport default withRouter(function MainContextProvider({children,location,history}){\r\n\tlet state\r\n\t([state,dispatch]=useReducer(mainReducer,JSON.parse(initState)))\r\n\r\n\tuseEffect(componentDidMount,[])\r\n\tuseEffect(stateToUrl,[...urlStateParamList.map(p=>state[p]),location.pathname])\r\n\tuseEffect(onSetIP,[state.IP])\r\n\r\n\t// console.log('MainContextProvider render')\r\n\treturn <MainContext.Provider value={{state,dispatch}}>{children}</MainContext.Provider>\r\n\r\n\tfunction componentDidMount(){\r\n\t\tconsole.log('componentDidMount')\r\n\t\tconst stateFromUrl=_.pick(Object.fromEntries(new URLSearchParams(location.search)),urlStateParamList)\r\n\t\tdispatch(['SET_STATE',stateFromUrl])\r\n\t\twindow.setInterval(()=>{\r\n\t\t\tif(currentState.isPolling){\r\n\t\t\t\t// console.log(currentState)\r\n\t\t\t\taxios.get(`http://${currentState.IP}:7878/live`).then(res=>{\r\n\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t// dispatch(['SET_ACTUAL_ANGLES',res.data])\r\n\t\t\t\t\trealPose=res.position\r\n\t\t\t\t\ttargetPose=res.target\r\n\t\t\t\t\tdispatch(['SET_STATE',{status: 'Online'}])\r\n\t\t\t\t}).catch(err=>dispatch(['SET_STATE',{status: 'Offline'}]))\r\n\t\t\t}\r\n\t\t},1000)\r\n\t}\r\n\r\n\tfunction stateToUrl(){\r\n\t\tconsole.log('stateToUrl')\r\n\t\tif(mounted)\r\n\t\t\thistory.replace(location.pathname+'?'+new URLSearchParams(_.pick(state,urlStateParamList)).toString())\r\n\t\telse{\r\n\t\t\thistory.replace('/login?'+new URLSearchParams(_.pick(state,urlStateParamList)).toString())\r\n\t\t\tmounted=true\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO: Robot nickname, firmware versions\r\n\tfunction onSetIP(){\r\n\t\tconst IP=currentState.IP\r\n\t\tdispatch(['SET_STATE',{camFeedState: 'searching'}])\r\n\t\tfetch(`http://${IP}:8081/?action=stream`)\r\n\t\t\t.then(()=>{\r\n\t\t\t\tif(currentState.IP===IP)\r\n\t\t\t\t\tdispatch(['SET_STATE',{camFeedState: 'found'}])\r\n\t\t\t})\r\n\t\t\t.catch(e=>{\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t\tif(currentState.IP===IP)\r\n\t\t\t\t\tdispatch(['SET_STATE',{camFeedState: 'not found'}])\r\n\t\t\t})\r\n\t}\r\n})\r\n","import React,{useContext,/*Fragment,*/useState} from 'react'\r\n\r\nimport './RightSidebar.scss'\r\nimport {MainContext,homePose,targetPose,realPose} from '../../contexts/MainContext'\r\nimport Sixi2 from '../../model/Sixi2'\r\nimport Accordion from '../../utilities/Accordion/Accordion'\r\n\r\n// TODO: End Affector Status\r\n// TODO: Speed & accl\r\n\r\nlet state,dispatch\r\nexport default function RightSidebar(){\r\n\t({state,dispatch}=useContext(MainContext))\r\n\treturn (\r\n\t\t<div id=\"RightSidebar\" className=\"row f-vert f-nowrap scroll-y\">\r\n\t\t\t{/*<div className=\"b-600 p-12\">Sim Robot Controls</div>*/}\r\n\t\t\t<div className=\"accordion-container\">\r\n\t\t\t\t<Accordion head={'Arm Angles'} maxHeight=\"176 px\">\r\n\t\t\t\t\t{['x','y','z'].map(i=><SectionInput {...{i}} key={i}/>)}\r\n\t\t\t\t</Accordion>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"accordion-container\">\r\n\t\t\t\t<Accordion head={'Wrist Angles'} maxHeight=\"176 px\">\r\n\t\t\t\t\t{['u','v','w'].map(i=><SectionInput {...{i}} key={i}/>)}\r\n\t\t\t\t</Accordion>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"accordion-container\">\r\n\t\t\t\t<Accordion head={'End Attachment State'} maxHeight=\"64 px\">\r\n\t\t\t\t\t{['t'].map(i=><SectionInput {...{i}} key={i}/>)}\r\n\t\t\t\t</Accordion>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"col-extrude row spc-12\">\r\n\t\t\t\t<div className=\"button outline col-12 row f-center\" onClick={()=>dispatch(['SET_SIM_ANGLES',JSON.parse(homePose)])}>\r\n\t\t\t\t\t<div className=\"icon-home super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Load Home Pose</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline col-12 row f-center\" onClick={()=>dispatch(['SET_SIM_ANGLES',realPose])}>\r\n\t\t\t\t\t<div className=\"icon-joystick super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Load Real World Pose</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline col-12 row f-center\" onClick={()=>dispatch(['SET_SIM_ANGLES',targetPose])}>\r\n\t\t\t\t\t<div className=\"icon-node_link_direction super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Load Target Pose</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"f-grow-1\"></div>\r\n\t\t\t{/* TODO: Halt*/}\r\n\t\t\t<div className=\"col-extrude row spc-12\">\r\n\t\t\t\t<div className=\"col-extrude col-12 row spc-12 f-center\">\r\n\t\t\t\t\t{/*<input type=\"checkbox\" checked={state.isPolling} onChange={({target})=>dispatch(['SET_STATE',{isPolling: target.checked}])}/>*/}\r\n\t\t\t\t\t{/*<div>Show live position</div>*/}\r\n\t\t\t\t\t<div className=\"h7 ml-auto mt-12\">{state.isPolling?state.status:undefined}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline col-12 row f-center\">\r\n\t\t\t\t\t<div className=\"icon-stop super-center\" style={{fontSize: '11px'}}/>\r\n\t\t\t\t\t<div className=\"col text-center\">Emergency Stop</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline col-12 row f-center\" onClick={()=>dispatch(['GO'])}>\r\n\t\t\t\t\t<div className=\"icon-play super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Go</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tstate.showSequenceControl?\r\n\t\t\t\t\t\t<div className=\"button outline col-12 row f-center\">\r\n\t\t\t\t\t\t\t<div className=\"fa fa-forward super-center\"/>\r\n\t\t\t\t\t\t\t<div className=\"col text-center\">Play Sequence</div>\r\n\t\t\t\t\t\t</div>:undefined\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction SectionInput({i}){\r\n\tconst section=Sixi2[i]\r\n\tconst [resetActive,setResetActive]=useState(false)\r\n\treturn (\r\n\t\t<div className=\"p-8 pt-2\">\r\n\t\t\t<div className=\"row mt-0\">\r\n\t\t\t\t<label className=\"uppercase\">{i}</label>\r\n\t\t\t\t<div className=\"col\" style={{height: '30px'}}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\"\r\n\t\t\t\t\t\tmin={section.angles.min}\r\n\t\t\t\t\t\tmax={section.angles.max}\r\n\t\t\t\t\t\tvalue={state.simPose[i]}\r\n\t\t\t\t\t\t{...{onChange}}\r\n\t\t\t\t\t\tstep=\".1\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"trim sliding-row\">\r\n\t\t\t\t<div className={'row f-nowrap mt-0'+(resetActive?' active':'')}>\r\n\t\t\t\t\t<div className=\"col-6 row mr-8\">\r\n\t\t\t\t\t\t<div className=\"button outline super-center icon-reply p-0\" title=\"Reset\" onClick={()=>setResetActive(true)}/>\r\n\t\t\t\t\t\t<div className=\"pl-10 col row f-justify-space-between\">\r\n\t\t\t\t\t\t\t<div className=\"col text-muted h7\">{section.angles.min}</div>\r\n\t\t\t\t\t\t\t{/*<div className=\"col text-center b-500\">{state.simPose[i]}Â°</div>*/}\r\n\t\t\t\t\t\t\t{/*<input className=\"text-center py-2\" type=\"number\" pattern=\"-?[0-9]+(\\.[0-9]{0,3})?\" value={state.simPose[i]} {...{onChange}}/>*/}\r\n\t\t\t\t\t\t\t<input className=\"text-center py-2\" type=\"number\" value={state.simPose[i]} {...{onChange}}/>\r\n\t\t\t\t\t\t\t<div className=\"col text-muted h7 text-right\">{section.angles.max}</div>\r\n\t\t\t\t\t\t\t<div className=\"row-breaker\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-6 row mr-8 f-center\">\r\n\t\t\t\t\t\t<div className=\"button outline super-center icon-cross_mark\" onClick={()=>setResetActive(false)}/>\r\n\t\t\t\t\t\t<div className=\"mr-auto ml-8\">Reset to:</div>\r\n\t\t\t\t\t\t<button title=\"Home angle\" className=\"outline ml-8 h8 icon-home\" style={{height: '22px'}} onClick={()=>onClick(JSON.parse(homePose)[i])} tabIndex=\"-1\"/>\r\n\t\t\t\t\t\t<button title=\"Actual angle\" className=\"outline ml-8 h8 icon-joystick\" style={{height: '22px'}} onClick={()=>onClick(realPose[i])} tabIndex=\"-1\"/>\r\n\t\t\t\t\t\t<button title=\"Target angle\" className=\"outline ml-8 h8 icon-node_link_direction\" style={{height: '22px'}} onClick={()=>onClick(targetPose[i])} tabIndex=\"-1\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\r\n\tfunction onClick(pose){\r\n\t\tsetResetActive(false)\r\n\t\tonChange({target:{valueAsNumber:pose}})\r\n\t}\r\n\r\n\tfunction onChange({target:{valueAsNumber}}){\r\n\t\tdispatch(['SET_SIM_ANGLES',{...state.simPose,[i]: valueAsNumber}])\r\n\t}\r\n}\r\n","import React,{useContext,useState,useEffect} from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport './Login.scss'\r\nimport {MainContext} from '../../contexts/MainContext'\r\n\r\nexport default withRouter(function Login({history}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tconst [isMounted,setIsMounted]=useState(false)\r\n\r\n\tuseEffect(()=>setIsMounted(true),[])\r\n\r\n\t// console.log('Login render')\r\n\treturn (\r\n\t\t<form id=\"Login\" className={isMounted?'active':undefined} {...{onSubmit}}>\r\n\t\t\t<section>\r\n\t\t\t\t{isMounted?<style>\r\n\t\t\t\t\t#cam-feed,\r\n\t\t\t\t\t#cam-feed:hover:not(.active)&#123;\r\n\t\t\t\t\t\tz-index: 1;\r\n\t\t\t\t\t\ttransform: scale(1,1);\r\n\t\t\t\t\t\tright: calc(50% - 320px);\r\n\t\t\t\t\t\tbottom: calc(50% - 213px);\r\n\t\t\t\t\t\tborder-radius: 6px;\r\n\t\t\t\t\t\ttransition: opacity .5s;\r\n\t\t\t\t\t&#125;\r\n\t\t\t\t</style>:undefined}\r\n\t\t\t\t<div className=\"cam-feed-container\"/>\r\n\t\t\t\t<div className=\"row spc-12 f-center\">\r\n\t\t\t\t\t<label htmlFor=\"login-ip\">Robot IP Address</label>\r\n\t\t\t\t\t<input id=\"login-ip\" className=\"col\" type=\"text\" name=\"Robot IP\" value={state.IP} onChange={({target})=>dispatch(['SET_STATE',{IP: target.value}])}/>\r\n\t\t\t\t\t<button className=\"outline\">Go</button>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</form>\r\n\t)\r\n\r\n\tfunction onSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tsetIsMounted(false)\r\n\t\twindow.setTimeout(()=>history.push('/'),500)\r\n\t}\r\n})\r\n","import React,{Fragment,useState} from 'react'\r\nimport './Accordion.css'\r\n\r\nexport default function Accordion(props){\r\n\tconst [expanded,setExpanded]=useState(true)\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div\r\n\t\t\t\tid={props.id}\r\n\t\t\t\tclassName={(props.className || '')+' accordion'+(expanded?' expanded':'')}\r\n\t\t\t\tonClick={()=>setExpanded(!expanded)}>{props.head}</div>\r\n\t\t\t<div style={{maxHeight: props.maxHeight}}>{props.children}</div>\r\n\t\t\t{/*<div style={{maxHeight: expanded || '100vh'}}>{props.children}</div>*/}\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n","import React,{useContext} from 'react'\r\n\r\nimport './BottomDrawer.scss'\r\nimport {MainContext} from '../../contexts/MainContext'\r\nimport HistoryTimeline from '../HistoryTimeline/HistoryTimeline'\r\n\r\nexport default function BottomDrawer(){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\treturn (\r\n\t\t<div id=\"BottomDrawer\">\r\n\t\t\t{(state.showHistoryTimeline || state.showSequenceControl)===false?<style>:root&#123; --bottomDrawerHeight: 46px &#125;</style>:undefined}\r\n\t\t\t<div id=\"taskbar\" className=\"row spc-8 f-end\">\r\n\t\t\t\t<div className=\"button outline row f-center\" onClick={()=>dispatch(['SET_STATE',{showHistoryTimeline: !state.showHistoryTimeline}])}>\r\n\t\t\t\t\t<div className=\"fa fa-history super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">History Timeline</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline row f-center\" onClick={()=>dispatch(['SET_STATE',{showSequenceControl: !state.showSequenceControl}])}>\r\n\t\t\t\t\t<div className=\"icon-layout_directed super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Sequence Controls</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"button outline row f-center\" onClick={()=>dispatch(['SET_STATE',{showLibrary: !state.showLibrary}])}>\r\n\t\t\t\t\t<div className=\"fa fa-bookmark super-center\"/>\r\n\t\t\t\t\t<div className=\"col text-center\">Library</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"ml-auto h7\">App Version: 0.1.0</div>\r\n\t\t\t</div>\r\n\t\t\t{state.showHistoryTimeline?<HistoryTimeline/>:undefined}\r\n\t\t\t{/*\r\n\t\t\t\t<PoseToImg pose={JSON.stringify({x: -00,y: -00,z: -00,u: -00,v: -00,w: -00,t: -00})}/>\r\n\t\t\t\t<PoseToImg pose={JSON.stringify({x: -15,y: -15,z: -15,u: -15,v: -15,w: -15,t: -15})}/>\r\n\t\t\t\t<PoseToImg pose={JSON.stringify({x: -30,y: -30,z: -30,u: -30,v: -30,w: -30,t: -30})}/>\r\n\t\t\t*/}\r\n\t\t\t{/*state.poseHistory.map((p,i)=><PoseToImg key={i} pose={p}/>)*/}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React,{useContext,Fragment} from 'react'\r\n\r\nimport './CamFeed.scss'\r\nimport {MainContext} from '../../contexts/MainContext'\r\n\r\n// TODO: camFeedState!=='found'\r\nexport default function CamFeed({className,children}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<style>\r\n\t\t\t\t#cam-feed&#123;\r\n\t\t\t\t\t{state.camFeedState!=='found'?'opacity: 0':undefined}\r\n\t\t\t\t&#125;\r\n\t\t\t</style>\r\n\t\t\t<img id=\"cam-feed\"\r\n\t\t\t\tclassName={state.camFeedMaximize?'active':''}\r\n\t\t\t\tsrc={`http://${state.IP}:8081/?action=stream`}\r\n\t\t\t\talt=\"Cam feed\"\r\n\t\t\t\tonClick={()=>dispatch(['SET_STATE',{camFeedMaximize: !state.camFeedMaximize}])}/>\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n","import React,{/*useContext*/} from 'react'\nimport {Route,withRouter,/*Link*/} from 'react-router-dom'\n\nimport './App.scss'\nimport Login from '../Login/Login'\n// import {MainContext} from '../../contexts/MainContext'\n// import RobotView from '../RobotView/RobotView'\nimport SimRobot from '../SimRobot/SimRobot'\nimport RightSidebar from '../RightSidebar/RightSidebar'\nimport BottomDrawer from '../BottomDrawer/BottomDrawer'\nimport CamFeed from '../CamFeed/CamFeed'\n\nexport default withRouter(function App(){\n\t// const {state,dispatch}=useContext(MainContext)\n\n\t// console.log('App render')\n\treturn (\n\t\t<div id=\"App\">\n\t\t\t{/*<RobotView/>*/}\n\t\t\t<div className=\"pos-rel\">\n\t\t\t\t<SimRobot/>\n\t\t\t</div>\n\t\t\t<RightSidebar/>\n\t\t\t<CamFeed/>\n\t\t\t<BottomDrawer/>\n\t\t\t<Route path=\"/login\" component={Login}/>\n\t\t</div>\n\t)\n})\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {HashRouter} from 'react-router-dom'\n\nimport './index.scss'\nimport App from './components/App/App'\nimport * as serviceWorker from './serviceWorker'\nimport MainContextProvider from './contexts/MainContext'\n\n// TODO: Replace componentDidMount with componentWillMount where ever possible\n// TODO: Pose class\n\nReactDOM.render(\n\t// <React.StrictMode>\n\t\t<HashRouter>\n\t\t\t<MainContextProvider>\n\t\t\t\t<App/>\n\t\t\t</MainContextProvider>\n\t\t</HashRouter>\n\t// </React.StrictMode>\n\t,document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n"],"sourceRoot":""}